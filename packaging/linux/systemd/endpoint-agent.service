[Unit]
Description=Endpoint Assessment Agent
Documentation=https://github.com/daveram1/EndpointAssessment
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User=endpoint-agent
Group=endpoint-agent
EnvironmentFile=/etc/endpoint-agent/agent.conf
ExecStart=/usr/bin/endpoint-agent
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal
SyslogIdentifier=endpoint-agent

# Security hardening
NoNewPrivileges=yes
ProtectSystem=strict
ProtectHome=yes
PrivateTmp=yes
PrivateDevices=yes
ProtectKernelTunables=yes
ProtectKernelModules=yes
ProtectControlGroups=yes
RestrictRealtime=yes
RestrictSUIDSGID=yes

# Allow network access
PrivateNetwork=no

# Allow reading system info
ReadOnlyPaths=/
ReadWritePaths=/var/log/endpoint-agent

[Install]
WantedBy=multi-user.target
